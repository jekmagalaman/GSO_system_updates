{% extends "personnel/personnel_base_dashboard.html" %}
{% block title %}Task Detail{% endblock %}

{% block main_content %}
<div class="card p-3">
  <h2>Task Detail</h2>
  <p><strong>Request ID:</strong> {{ task.id }}</p>
  <p><strong>Requesting Office:</strong> {{ task.requestor }}</p>
  <p><strong>Unit:</strong> {{ task.unit|title }}</p>
  <p><strong>Status:</strong> {{ task.status }}</p>
  <p><strong>Description:</strong> {{ task.description }}</p>

  <form method="post" class="mt-3">
    {% csrf_token %}
    {% if task.status == "Approved" %}
      <button type="submit" name="start" class="btn btn-primary">Start Task</button>
    {% elif task.status == "In Progress" %}
      <button type="submit" name="done" class="btn btn-success">Mark as Done (For Review)</button>
    {% endif %}
  </form>

  <div class="mt-2">
    <a href="{% url 'personnel_task_management' %}" class="btn btn-secondary">‚Üê Back</a>
  </div>
  
  {% if task.status == "Done for Review" %}
    <form method="post">
      {% csrf_token %}
      <button type="submit" name="approve_done" class="btn btn-success">Approve Completion</button>
    </form>
  {% endif %}
  
</div>
{% endblock %}
